!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.AceAccordion=e():t.AceAccordion=e()}(window,function(){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(n,s,function(e){return t[e]}.bind(null,s));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){const n=i(1),s=i(2);void 0!==t&&t.exports&&(t.exports=class{static get options_default(){return{selectors:{accordion:".accordion",item:".accordion__item",heading:".accordion__item__heading",content:".accordion__item__content",content_inner:".accordion__item__content__inner"},close_nested_items:!1,default_open_items:null,heading_trigger_selector:null,multiple_open_items:!0,trigger_on_hover:!1,callbacks:{accordion:{initialize:{before:null,after:null}},item:{initialize:{before:null,after:null},open:{},close:{}}},debug:!1}}static get constants(){return{id_attribute:"data-ace-instance-id"}}get accordion_elements(){return Array.from(document.querySelectorAll(this.options.selectors.accordion))}static addInstance(t,e,i,n){const s=t[e];return t[e]++,t[i][s]=n,s}addAceAccordion(){return"number"!=typeof this.constructor.ace_accordion_count&&(this.constructor.ace_accordion_count=0),"object"!=typeof this.constructor.ace_accordions&&(this.constructor.ace_accordions={}),this.constructor.addInstance(this.constructor,"ace_accordion_count","ace_accordions",this)}addAccordion(t){"function"==typeof this.options.callbacks.accordion.initialize.before&&this.options.callbacks.accordion.initialize.before.call(null,t);const e=this.accordion_count,i=new s(this,e,t);i&&this.constructor.addInstance(this,"accordion_count","accordions",i),"function"==typeof this.options.callbacks.accordion.initialize.after&&this.options.callbacks.accordion.initialize.after.call(i,t)}constructor(t){if(this.options=n([{},this.constructor.options_default,t],!0),this.id=this.addAceAccordion(),this.selector="["+this.constructor.constants.id_attribute+'="'+this.id+'"]',this.accordion_count=0,this.accordions={},this.accordion_elements.length>0)for(let t=0;t<this.accordion_elements.length;t++)this.addAccordion(this.accordion_elements[t]);else console.warn(this.constructor.name+": No accordions found using selector: '"+this.options.selectors.accordion+"'");return this.options.debug&&(console.log("AceAccordion Debug: AceAccordion Class:"),console.dir(this.constructor)),this}destroy(){}})},function(t,e){const i=(t,e)=>{const i=(t,e,n)=>{for(let s in e)if("object"==typeof e[s]&&null!==e[s]&&n){if(e[s]instanceof Window||e[s]instanceof HTMLDocument||e[s]instanceof Element){t[s]=e[s];continue}Array.isArray(e[s])||e[s]instanceof NodeList?(e[s]instanceof NodeList&&(e[s]=Array.from(e[s])),t[s]=[]):"object"==typeof t[s]&&null!==t[s]||(t[s]={}),i(t[s],e[s],n)}else t[s]=e[s];return t};if(t.length>1)for(let n=1;n<t.length;n++)"object"==typeof t[n]&&null!==t[n]&&i(t[0],t[n],e);return t[0]};void 0!==t&&t.exports&&(t.exports=i)},function(t,e,i){const n=i(3);t.exports=class{static get constants(){return{global_selector:"[data-ace-accordion-id]",id_attribute:"data-ace-accordion-id",item_instances_property:"items"}}get options(){return this.wrapper_ace_accordion.options}get parent_accordion(){let t=this.element.parentNode.closest("["+this.constructor.constants.id_attribute+"]");return t&&(t=t.ace_object),t}get item_elements(){return Array.from(this.element.querySelectorAll(this.selector+" > "+this.options.selectors.item))}addItem(t){"function"==typeof this.options.callbacks.item.initialize.before&&this.options.callbacks.item.initialize.before.call(null,t);const e=this.item_count,i=new n(this,e,t);i&&this.wrapper_ace_accordion.constructor.addInstance(this,"item_count","items",i),"function"==typeof this.options.callbacks.item.initialize.after&&this.options.callbacks.item.initialize.after.call(i,t)}constructor(t,e,i){if(this.wrapper_ace_accordion=t,this.element=i,this.element.ace_object=this,this.id=e,this.element.setAttribute(this.wrapper_ace_accordion.constructor.constants.id_attribute,this.wrapper_ace_accordion.id),this.element.setAttribute(this.constructor.constants.id_attribute,this.id),this.selector=this.wrapper_ace_accordion.selector+"["+this.constructor.constants.id_attribute+'="'+this.id+'"]',this.item_count=0,this.items={},this.item_elements.length>0)for(let t=0;t<this.item_elements.length;t++)this.addItem(this.item_elements[t]);else this.options.debug&&console.warn(this.constructor.name+": No items found using selector: '"+this.options.selectors.item+"'");return this}destroy(){}}},function(t,e,i){const n=i(4),s=i(5);t.exports=class{static get constants(){return{global_selector:"[data-ace-item-id]",id_attribute:"data-ace-item-id",controller_attrubute:"data-ace-item-controller",state_attrubute:"data-ace-item-state"}}get options(){return this.wrapper_accordion.wrapper_ace_accordion.options}get index(){return this.wrapper_accordion.item_elements.indexOf(this.element)}get state(){return this.element.getAttribute(this.constructor.constants.state_attrubute)}get controller(){return this.element.getAttribute(this.constructor.constants.controller_attrubute)}get immediateChildAccordions(){const t=[],e=this.wrapper_accordion.constructor.constants.global_selector,i=this.constructor.constants.global_selector,n=this.element.querySelectorAll(e);let s;for(let e=0;e<n.length;e++)(s=n[e]).parentNode.closest(i)===this.element&&t.push(s.ace_object);return t}get previousItem(){const t=this.wrapper_accordion.item_elements[this.index-1];return t||!1}get nextItem(){const t=this.wrapper_accordion.item_elements[this.index+1];return t||!1}set state(t){return this.element.setAttribute(this.constructor.constants.state_attrubute,t),t}set controller(t){return this.element.setAttribute(this.constructor.constants.controller_attrubute,t),t}matches(t){if(t instanceof NodeList&&(t=Array.from(t)),Array.isArray(t)){for(let e=0;e<t.length;e++)if(this.matches(t[e]))return!0}else if("number"==typeof t){if(Number.isInteger(t)&&t>=0&&this.index===t)return!0}else if("string"==typeof t){if(this.element.matches(t))return!0}else if(t instanceof Element&&this.element===t)return!0;return!1}open(t="",e=!1){if("opened"!==this.state&&"opening"!==this.state){if(this.controller=t,!1===this.options.multiple_open_items){let t=this.wrapper_accordion.items;for(let e in t)this.element!==t[e].element&&t[e].close("",!1)}if(this.heading.trigger_element.setAttribute("aria-expanded","true"),this.content.element.setAttribute("aria-hidden","false"),this.content.hasHeightTransition()&&!e){const t=this.content.getComputedHeight();this.content.element.style.height=t+"px",this.state="opening";const e=this.content.inner_element.offsetHeight;this.content.element.style.height=e+"px"}else this.open_finish()}}open_finish(){this.state="opened",this.content.element.style.height=""}close(t="",e=!1){if("closed"!==this.state&&"closing"!==this.state&&(t===this.controller||""===t))if(this.heading.trigger_element.setAttribute("aria-expanded","false"),this.content.element.setAttribute("aria-hidden","true"),this.content.hasHeightTransition()&&!e){const t=this.content.getComputedHeight();this.content.element.style.height=t+"px",this.state="closing",this.content.element.offsetHeight,this.content.element.style.height="0px"}else this.close_finish()}close_finish(){if(this.heading.trigger_element.setAttribute("aria-expanded","true"),this.content.element.setAttribute("aria-hidden","false"),this.state="closed",this.content.element.style.height="",this.controller="",!0===this.options.close_nested_items){const t=this.immediateChildAccordions;let e;for(let i=0;i<t.length;i++){let n;e=t[i];for(let t in e.items)(n=e.items[t]).close("",!0)}}}toggle(t,e=!1){"opening"===this.state||"opened"===this.state?this.close(t,e):"closing"!==this.state&&"closed"!==this.state||this.open(t,e)}handleTransitionEnd(t){if("height"===t.propertyName){const t=this.ace_object.wrapper_item;"opening"===t.state?t.open_finish():"closing"===t.state&&t.close_finish()}}handleMouseEnter(t){const e=this.ace_object;e.options.trigger_on_hover&&e.open("hover")}handleMouseLeave(t){const e=this.ace_object;e.options.trigger_on_hover&&e.close("hover")}focusTrigger(t){"previous"===t&&this.previousItem?this.previousItem.ace_object.focusTrigger():"next"===t&&this.nextItem?this.nextItem.ace_object.focusTrigger():this.heading.trigger_element.focus()}constructor(t,e,i){this.wrapper_accordion=t,this.element=i,this.element.ace_object=this,this.id=e,this.element.setAttribute(this.constructor.constants.id_attribute,this.id),this.selector=this.wrapper_accordion.selector+" > ["+this.constructor.constants.id_attribute+'="'+this.id+'"]';let o="closed";!1===this.options.default_open_items&&null===this.options.default_open_items&&void 0===this.options.default_open_items||this.matches(this.options.default_open_items)&&(o="opened"),this.state=o;const r=this.element.querySelector(this.selector+" > "+this.options.selectors.content),c=this.element.querySelector(this.selector+" > "+this.options.selectors.content+" > "+this.options.selectors.content_inner);r&&c&&(this.content=new s(this,r,c));const a=this.element.querySelector(this.selector+" > "+this.options.selectors.heading);return a&&(this.heading=new n(this,a)),this.transitionendListener=this.content.element.addEventListener("transitionend",this.handleTransitionEnd),this.transitionendListener=this.element.addEventListener("mouseenter",this.handleMouseEnter),this.transitionendListener=this.element.addEventListener("mouseleave",this.handleMouseLeave),this}destroy(){}}},function(t,e){t.exports=class{get options(){return this.wrapper_item.wrapper_accordion.wrapper_ace_accordion.options}static get constants(){return{ace_attribute:"data-ace-heading"}}determineTriggerElement(t){if("string"==typeof t){const e=this.element.querySelector(t);if(e)return e}return this.element}handleClick(t){this.ace_object.wrapper_item.toggle("click",!1)}handleKeyDown(t){const e=t.target.ace_object;switch(t.keyCode){case 38:e.wrapper_item.focusTrigger("previous");break;case 40:e.wrapper_item.focusTrigger("next")}}constructor(t,e){this.wrapper_item=t,this.element=e,this.trigger_element=this.determineTriggerElement(this.options.heading_trigger_selector),this.element.ace_object=this,this.trigger_element.ace_object=this,this.element.setAttribute(this.constructor.constants.ace_attribute,""),this.trigger_element.setAttribute("aria-controls",this.wrapper_item.content.element.id);let i=!1;return"opened"===this.wrapper_item.state&&(i=!0),this.trigger_element.setAttribute("aria-expanded",i),this.trigger_element.addEventListener("click",this.handleClick),this.trigger_element.addEventListener("keydown",this.handleKeyDown),this}destroy(){this.element.ace_object=void 0,this.trigger_element.ace_object=void 0,this.trigger_element.removeAttribute("aria-controls"),this.trigger_element.removeAttribute("aria-expanded"),this.trigger_element.removeEventListener("click",this.handleClick),this.trigger_element.removeEventListener("keydown",this.handleKeyDown),this.wrapper_item.heading=void 0}}},function(t,e){t.exports=class{static get constants(){return{ace_attribute:"data-ace-content",ace_attribute_inner:"data-ace-content-inner"}}get options(){return this.wrapper_item.wrapper_accordion.wrapper_ace_accordion.options}generateId(){return"accordion-content-"+this.wrapper_item.wrapper_accordion.wrapper_ace_accordion.id+"-"+this.wrapper_item.wrapper_accordion.id+"-"+this.wrapper_item.id}hasHeightTransition(t){return t||(t=window.getComputedStyle(this.element)),t.transitionProperty.split(", ").indexOf("height")>=0}getComputedHeight(t){return t||(t=window.getComputedStyle(this.element)),t.height.slice(0,-2)}constructor(t,e,i){this.wrapper_item=t,this.element=e,this.element.setAttribute(this.constructor.constants.ace_attribute,""),this.element.ace_object=this,this.inner_element=i,this.inner_element.setAttribute(this.constructor.constants.ace_attribute_inner,""),this.initial_id=this.element.id,""!==this.initial_id||(this.element.id=this.generateId());let n=!0;return"opened"===this.wrapper_item.state&&(n=!1),this.element.setAttribute("aria-hidden",n),this}destroy(){this.element.ace_object=void 0,this.element.id===this.initial_id||this.element.setAttribute("id",this.initial_id),this.element.removeAttribute("aria-hidden"),this.wrapper_item.content=void 0}}}])});